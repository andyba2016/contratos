<!-- page content -->
<div class="right_col" role="main">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3>Contratos</h3>
      </div>

      <div class="title_right">
      </div>
    </div>
    <div class="clearfix"></div>

    <div class="row">

      <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel" >
          <div class="x_title">
            <h2>Contratos</h2>
            <ul class="nav navbar-right panel_toolbox">
            </ul>
            <div class="clearfix">

            </div>
          </div>
          <form  class="form-inline" method="post" action="/contratos">
            <div class="form-group">
              <div class="controls">
                <div class="col-md-11 col-sm-11 xdisplay_inputx form-group has-feedback">
                  <input type="text" id="datetimepicker1" class="form-control has-feedback-left datetimepicker"  name="fecha_desde" placeholder="First Date" aria-describedby="inputSuccess2Status4">
                  <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                  <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="controls">
                <div class="col-md-11 col-sm-11 xdisplay_inputx form-group has-feedback">
                  <input type="text" id="datetimepicker2" class="form-control has-feedback-left datetimepicker" name="fecha_hasta" data-datetimepicker data-click-target id="single_cal4" placeholder="First Date" aria-describedby="inputSuccess2Status4">
                  <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
                  <span id="inputSuccess2Status4" class="sr-only">(success)</span>
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="area">Area:</label>
              <select  name="area" class="form-control">
                <option value="-1">Todas</option>
              <% @lista_areas.each do |attr_name, attr_value| %>
                    <option value="<%= attr_name.id %>"><%= attr_name.descripcion.camelize%></option>
              <% end %>
              </select>
            </div>
            <div class="form-group">
              <label for="tipo">Tipo:</label>
              <select name="tipo" class="form-control">
                <% @lista_tipo.each do |attr_name| %>
                    <option value="<%= attr_name %>"><%= attr_name[0]%></option>
                <% end %>
              </select>
            </div>
            <div class="form-group pull-right">
              <button type="submit" class="btn btn-default">Buscar</button>
            </div>
          </form>
          <table class="table table-bordered dataTable  table-stripped" id="tabla">
            <thead>
            <tr>
              <% @object.attributes.each do |attr_name, attr_value| %>
                  <th><%= attr_name.camelize %></th>

              <% end %>
              <th>Acciones</th>
            </tr>
            </thead>
            <tbody>


            <% @result.each do |r| %>
                <tr>

                  <% @result.column_names.each do |col|
                  %>

                      <td>
                        <% if col.end_with?('_id') && col!='usuarios_id' && col!='estado' %>
                            <% @atributo = col[0...-3] %>
                            <!-- #@atributo-->
                            <% unless r.send(@atributo).nil? %>
                                <%= r.send(@atributo).descripcion %>
                            <% end %>
                        <% else %>
                            <%= r[col] %>
                        <% end %>      </td>
                  <% end %>



                  <td>

                    <%
                    if @usuario.perfil_id == 1
                    %>
                    <a><span  class="fa fa-file" alt="Ver"/></a>
                    <a><span class="fa fa-money" style="cursor:pointer;" alt="Pagos"/></a>
                    <a href="/<%= controller_name %>/update/<%= r.id %>" ><span class="fa fa-pencil" alt="Editar"/></a>
                    <a href="/<%= controller_name %>/delete/<%= r.id %>" class="eliminar"><span class="fa fa-close" style="cursor:pointer;" alt="Eliminar"/></a>
                    <%
                    else
                      %>

                        <a><span style='padding-left:15Px;cursor:pointer;' class="fa fa-file" alt="Ver"/></a>
                        <%
                    end
                    %>


                  </td>

            <% end %>
            </tr>

            </tbody>
          </table>


        </div>


    </div>
  </div>
</div>
  <div class="row">


    <div class="col-md-12 col-sm-12 col-xs-12">
      <div class="x_panel" style="">
        <div class="x_title">
          <h2>Nuevo</h2>
          <ul class="nav navbar-right panel_toolbox"></ul>
          <div class="clearfix"></div>
        </div>

        <!--              <form method="POST" action="/<%= controller_name %>/save">

<%=  @object.inspect %>
                <% @object.attributes.each do |attr_name, attr_value| %>
                    <% if attr_name != "fecha_baja" and attr_name != "fecha_alta" and attr_name != "estado" %>
                        <% if attr_name == "id" %>
                            <input type="hidden" name="<%= attr_name %>" value="<%= attr_value %>"/>
                        <% else %>
                            <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                              <input class="form-control has-feedback-left" placeholder="<%= attr_name.camelize %>" name="<%= attr_name %>" value="<%= attr_value %>" type="text">
                              <span class="fa fa-user form-control-feedback left" aria-hidden="true"></span>
                            </div>

                        <% end %>
                    <% end %>

                <% end %>
                <div class="col-lg-12 col-md-3 col-sm-3 col-xs-6 form-group has-feedback">
                  <input class="btn btn-success" value="Guardar" type="submit">
                </div>
              </form>-->
        <form id="demo-form2"  method="POST" action="/<%= controller_name %>/save" data-parsley-validate="" class="form-horizontal form-label-left" novalidate="">

          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Tipo de contrato<span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
              <select class="form-control" name="tipo_id" id="tipo_id">
                <%
                  @lista_tipo.each do |k,v|
                %>
                    <option value="<%=v  %>">
                      <%=
                        k
                      %>
                    </option>
                <%
                  end
                %>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Persona<span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
              <select name="persona_id" id="persona_id" class="form-control">
                <%=
                  @persona.each do |k,v|
                %>
                    <option value="<%=k.id%>">
                      <%=
                        k.apellido+', '+k.nombre
                      %>
                    </option>
                <%
                  end
                %>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Autoridad<span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
              <select name="autoridad_id" id="autoridad_id" class="form-control">
                <%=
                  @persona.each do |k,v|
                %>
                    <option value="<%=k.id%>">
                      <%=
                        k.apellido+', '+k.nombre
                      %>
                    </option>
                <%
                  end
                %>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Area <span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
              <select name="area_id" id="area_id" class="form-control">
                <%=
                  @lista_areas.each do |k,v|
                %>
                    <option value="<%= k.id%>">
                      <%= k.descripcion %>
                    </option>
                <%
                  end
                %>
              </select>
            </div>
          </div>
          <div class="form-group">
            <label for="middle-name" class="control-label col-md-3 col-sm-3 col-xs-12">Fecha desde</label>
            <!--div class="col-md-6 col-sm-6 col-xs-12">
              <input id="middle-name" class="form-control col-md-7 col-xs-12" type="text" name="middle-name">
            </div-->

            <div class="col-md-6 col-sm-6 xdisplay_inputx form-group has-feedback">
              <input type="text"  name="fecha_desde_id" id="fecha_desde_id" id="datetimepicker3" data-datetimepicker class="form-control has-feedback-left datetimepicker"  placeholder="Fecha desde" aria-describedby="inputSuccess2Status4">
              <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
              <span id="inputSuccess2Status4" class="sr-only">(success)</span>
            </div>

          </div>
          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12">Fecha hasta<span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 xdisplay_inputx form-group has-feedback">
              <input type="text"  name="fecha_hasta_id" id="fecha_hasta_id" data-datetimepicker class="form-control has-feedback-left datetimepicker"  placeholder="Fecha desde" aria-describedby="inputSuccess2Status4">
              <span class="fa fa-calendar-o form-control-feedback left" aria-hidden="true"></span>
              <span id="inputSuccess2Status4" class="sr-only">(success)</span>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-md-3 col-sm-3 col-xs-12">Tarea<span class="required">*</span>
            </label>
            <div class="col-md-6 col-sm-6 col-xs-12">
              <textarea id="message" name="tarea" id="tarea" required="required" class="form-control" name="message" data-parsley-trigger="keyup" data-parsley-minlength="20" data-parsley-maxlength="100" data-parsley-minlength-message="Come on! You need to enter at least a 20 caracters long comment.." data-parsley-validation-threshold="10"></textarea>
            </div>
          </div>

          <div class="ln_solid"></div>
          <div class="form-group">
            <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3">
              <button type="submit" class="btn btn-success">Enviar</button>
            </div>
          </div>

        </form>

      </div>
    </div>
  </div>
</div>
</div>
<%= javascript_include_tag( 'contratos' ) %>
